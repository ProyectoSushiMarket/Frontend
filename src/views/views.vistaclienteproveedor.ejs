<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clientes de Tienda de Verduras</title>
    <link rel="stylesheet" href="/css/vistaclienteproveedor.css">
</head>
<body>
    <header>
        <div class="navbar">
            <h1>Tienda Verduras</h1>
            <nav>
                <a href="/principalproveedor">Tienda</a>
                <a href="https://wa.me/+573188342212">Contactanos</a>
                <span class="perfil">游녻 Perfil: <strong>PROVEEDOR</strong></span>
            </nav>
        </div>
    </header>
    <main>
        <h2>Lista de Clientes</h2>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Buscar cliente..." />
            <!-- <button class="crearcliente">Crear Cliente</button> -->
        </div>
        <table id="clientesTabla">
            <thead>
                <tr>
                    <th>ID Usuario</th>
                    <th>Nombre</th>
                    <th>Usuario</th>
                    <th>Rol</th>
                </tr>
            </thead>
            <tbody>
                <!-- Aqu칤 se insertar치n las filas din치micamente -->
            </tbody>
        </table>
    </main>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // URL de tu API (ajusta la URL seg칰n tu backend)
            const apiUrl = "http://localhost:4100/usuario";

            // Referencia al cuerpo de la tabla
            const tbody = document.querySelector("#clientesTabla tbody");

            // Funci칩n para obtener clientes desde la API
            async function obtenerClientes() {
                try {
                    const response = await fetch(apiUrl);
                    if (!response.ok) {
                        throw new Error("Error al obtener los datos");
                    }
                    const clientes = await response.json();

                    // Limpiar tabla antes de agregar los datos
                    tbody.innerHTML = "";

                    // Llenar la tabla con los datos de los clientes
                    clientes.forEach(cliente => {
                        const fila = document.createElement("tr");

                        fila.innerHTML = `
                            <td>${cliente.id_usuario}</td>
                            <td>${cliente.nombre}</td>
                            <td>${cliente.usuario}</td>
                            <td>${cliente.rol}</td>
                        `;

                        tbody.appendChild(fila);
                    });
                } catch (error) {
                    console.error("Error al cargar los clientes:", error);
                }
            }

            // Llamar a la funci칩n para cargar los clientes al cargar la p치gina
            obtenerClientes();
            
        });
    </script>

    <script src="/js/vistaclienteproveedor.js"></script>
</body>
</html>
